var J=Object.defineProperty;var X=(e,t,r)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var u=(e,t,r)=>(X(e,typeof t!="symbol"?t+"":t,r),r);import{z as Q,A as R,o as l,c as f,b as h,B as b,F as C,f as w,t as E,C as x,d as k,a as y,w as I,h as U,D as Y,G as Z,e as H,g as ee}from"./vendor.1787915b.js";import{_ as D}from"./index.2cb9d9cc.js";import{l as $,a as te,n as re,d as ne}from"./device.317eeff5.js";/**
  * vue-class-component v8.0.0-rc.1
  * (c) 2015-present Evan You
  * @license MIT
  */function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function oe(e,t,r){return t&&N(e.prototype,t),r&&N(e,r),e}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,o)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z(Object(r),!0).forEach(function(o){ie(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function se(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},S(e)}function M(e,t){return M=Object.setPrototypeOf||function(o,n){return o.__proto__=n,o},M(e,t)}function ae(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e,t){return t&&(typeof t=="object"||typeof t=="function")?t:ue(e)}function le(e){var t=ae();return function(){var o=S(e),n;if(t){var s=S(this).constructor;n=Reflect.construct(o,arguments,s)}else n=o.apply(this,arguments);return ce(this,n)}}function fe(e){return de(e)||he(e)||pe(e)||ge()}function de(e){if(Array.isArray(e))return B(e)}function he(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function pe(e,t){if(!!e){if(typeof e=="string")return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}}function B(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function ge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(e,t,r){Object.defineProperty(e,t,{get:r,enumerable:!1,configurable:!0})}function me(e,t,r){Object.defineProperty(e,t,{get:function(){return r[t].value},set:function(n){r[t].value=n},enumerable:!0,configurable:!0})}function _e(e){var t=Object.getPrototypeOf(e.prototype);if(!!t)return t.constructor}function L(e,t){return e.hasOwnProperty(t)?e[t]:void 0}var V=function(){function e(t,r){var o=this;G(this,e),O(this,"$props",function(){return t}),O(this,"$attrs",function(){return r.attrs}),O(this,"$slots",function(){return r.slots}),O(this,"$emit",function(){return r.emit}),Object.keys(t).forEach(function(n){Object.defineProperty(o,n,{enumerable:!1,configurable:!0,writable:!0,value:t[n]})})}return oe(e,null,[{key:"registerHooks",value:function(r){var o;(o=this.__h).push.apply(o,fe(r))}},{key:"with",value:function(r){var o=new r,n={};Object.keys(o).forEach(function(i){var a=o[i];n[i]=a!=null?a:null});var s=function(i){se(p,i);var a=le(p);function p(){return G(this,p),a.apply(this,arguments)}return p}(this);return s.__b={props:n},s}},{key:"__vccOpts",get:function(){if(this===W)return{};var r=this,o=L(r,"__c");if(o)return o;var n=P({},L(r,"__o"));r.__c=n;var s=_e(r);s&&(n.extends=s.__vccOpts);var i=L(r,"__b");i&&(n.mixins=n.mixins||[],n.mixins.unshift(i)),n.methods=P({},n.methods),n.computed=P({},n.computed);var a=r.prototype;Object.getOwnPropertyNames(a).forEach(function(c){if(c!=="constructor"){if(r.__h.indexOf(c)>-1){n[c]=a[c];return}var m=Object.getOwnPropertyDescriptor(a,c);if(typeof m.value=="function"){n.methods[c]=m.value;return}if(m.get||m.set){n.computed[c]={get:m.get,set:m.set};return}}}),n.setup=function(c,m){var j,g=new r(c,m),T=Object.keys(g),_={},v=null;return T.forEach(function(d){g[d]===void 0||g[d]&&g[d].__s||(_[d]=Q(g[d]),me(g,d,_))}),T.forEach(function(d){if(g[d]&&g[d].__s){var F=g[d].__s();F instanceof Promise?(v||(v=Promise.resolve(_)),v=v.then(function(){return F.then(function(q){return _[d]=R(q),_})})):_[d]=R(F)}}),(j=v)!==null&&j!==void 0?j:_};var p=L(r,"__d");p&&p.forEach(function(c){return c(n)});var K=["render","ssrRender","__file","__cssModules","__scopeId","__hmrId"];return K.forEach(function(c){r[c]&&(n[c]=r[c])}),n}}]),e}();V.__h=["data","beforeCreate","created","beforeMount","mounted","beforeUnmount","unmounted","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];var W=V;function ve(e){return function(t){return t.__o=e,t}}var be="/proc/assets/cloud.1d6341bd.svg",ye="/proc/assets/obstacle.c693542a.gif",Ie="/proc/assets/food.51419ff6.svg",Oe="/proc/assets/player.993d3eb5.gif";var Le=Object.defineProperty,Ce=Object.getOwnPropertyDescriptor,we=(e,t,r,o)=>{for(var n=o>1?void 0:o?Ce(t,r):t,s=e.length-1,i;s>=0;s--)(i=e[s])&&(n=(o?i(t,r,n):i(n))||n);return o&&n&&Le(t,r,n),n};let A=class extends W{constructor(){super(...arguments);u(this,"isPlaying",!1);u(this,"isShowScore",!1);u(this,"isShowTips",!0);u(this,"currentScore",0);u(this,"jumpHeight",0);u(this,"isJumping",!1);u(this,"speed",5);u(this,"cloudMinSpeed",1);u(this,"cloudMaxSpeed",3);u(this,"gameIntervalId",null);u(this,"generateCloudIntervalId",null);u(this,"generateObstacleIntervalId",null);u(this,"generateFoodIntervalId",null);u(this,"playerBottom",0);u(this,"roadMarginLeft",0);u(this,"cloudList",[]);u(this,"obstacleList",[]);u(this,"foodList",[])}mounted(){this.jumpHeight=this.$refs.player.clientHeight*2.5,document.onkeydown=e=>{(window.event?e.keyCode:e.which)==32&&(this.isPlaying||this.start(),this.jump())}}start(){this.isPlaying=!0,this.gameIntervalId=setInterval(this.gameInterval,16),this.generateObstacleIntervalId=setTimeout(this.generateObstacle,0),this.generateFoodIntervalId=setTimeout(this.generateFood,5e3),this.isShowScore=!0,this.isShowTips=!1}gameInterval(){this.moveRoad(),this.moveObstacle(),this.moveFood(),this.checkGameState()}moveRoad(){const{road:e}=this.$refs;let t=parseInt(e.style.marginLeft)-this.speed;Math.abs(t)>e.clientWidth/2&&(t=0),this.roadMarginLeft=t}moveCloud(){for(let e=0;e<this.cloudList.length;e++)this.cloudList[e].marginLeft-=this.cloudList[e].speed}moveObstacle(){for(let e=0;e<this.obstacleList.length;e++)this.obstacleList[e].marginLeft-=this.speed}moveFood(){for(let e=0;e<this.foodList.length;e++)this.foodList[e].marginLeft-=this.speed}generateCloud(){const{cloudContainer:e,player:t}=this.$refs;this.cloudList.push({id:Math.random().toString(),height:(Math.random()+.5)*t.clientHeight,marginTop:Math.random()*(e.clientHeight-t.clientHeight),marginLeft:e.clientWidth,speed:Math.random()*(this.cloudMaxSpeed-this.cloudMinSpeed)+this.cloudMinSpeed}),this.generateCloudIntervalId=setTimeout(this.generateCloud,Math.random()*1500+2500)}generateObstacle(){const{obstacleContainer:e,player:t}=this.$refs,r=Math.random()*this.currentScore/10*.1+1;this.obstacleList.push({id:Math.random().toString(),height:r*t.clientHeight,marginLeft:e.clientWidth,isScored:!1}),this.generateObstacleIntervalId=setTimeout(this.generateObstacle,Math.random()*1e3+2e3)}generateFood(){this.foodList.push({id:Math.random().toString(),height:this.$refs.player.clientHeight/3*2,marginLeft:this.$refs.foodContainer.clientWidth,bottom:Math.random()*this.jumpHeight,isScored:!1}),this.generateFoodIntervalId=setTimeout(this.generateFood,Math.random()*5e3+5e3)}jump(){if(this.isJumping)return;this.isJumping=!0;const{player:e}=this.$refs,t=parseInt(e.style.bottom);let r=0;const o=setInterval(()=>{const n=Math.sin(r+=.06)*this.jumpHeight;n>t?this.playerBottom=n:(this.playerBottom=t,clearInterval(o),this.isJumping=!1)},16)}checkGameState(){for(let s=this.cloudList.length-1;s>=0;s--)this.cloudList[s].marginLeft<-200&&this.cloudList.splice(s,1);const{player:t}=this.$refs,r=this.zoomOutBound(t.getBoundingClientRect()),{obstacleContainer:o}=this.$refs;for(let s=this.obstacleList.length-1;s>=0;s--){const i=this.obstacleList[s],a=this.zoomOutBound(o.children[s].getBoundingClientRect());if(!(r.right<a.left||r.left>a.right||r.top>a.bottom||r.bottom<a.top)){this.over();return}r.left>a.right&&!i.isScored&&(i.isScored=!0,this.scoring()),i.marginLeft<-200&&this.obstacleList.splice(s,1)}const{foodContainer:n}=this.$refs;for(let s=this.foodList.length-1;s>=0;s--){const i=this.foodList[s],a=this.zoomOutBound(n.children[s].getBoundingClientRect());!(r.right<a.left||r.left>a.right||r.top>a.bottom||r.bottom<a.top)&&!i.isScored&&(i.isScored=!0,this.scoring(),this.foodList.splice(s,1))}}zoomOutBound(e){return{top:e.top+e.height*.1,right:e.right-e.width*.1,bottom:e.bottom-e.height*.1,left:e.left+e.width*.1}}scoring(){this.currentScore+=1}over(){this.isPlaying=!1,this.currentScore=0,this.gameIntervalId&&clearInterval(this.gameIntervalId),this.generateCloudIntervalId&&clearInterval(this.generateCloudIntervalId),this.generateObstacleIntervalId&&clearInterval(this.generateObstacleIntervalId),this.generateFoodIntervalId&&clearInterval(this.generateFoodIntervalId),this.cloudList.splice(0),this.obstacleList.splice(0),this.foodList.splice(0),this.isShowScore=!1,this.isShowTips=!0}};A=we([ve({})],A);const Se=A,$e={class:"internalGame"},je={ref:"cloudContainer",class:"cloudContainer"},Fe={ref:"obstacleContainer",class:"obstacleContainer"},Pe={ref:"foodContainer",class:"foodContainer"},Ee={key:0,class:"score"},xe={key:1,class:"tips"};function Me(e,t,r,o,n,s){return l(),f("div",$e,[h("div",{ref:"road",class:"road",style:b({marginLeft:`${e.roadMarginLeft}px`})},null,4),h("div",je,[(l(!0),f(C,null,w(e.cloudList,i=>(l(),f("img",{class:"cloud",src:be,key:i.id,style:b({height:`${i.height}px`,marginTop:`${i.marginTop}px`,marginLeft:`${i.marginLeft}px`})},null,4))),128))],512),h("div",Fe,[(l(!0),f(C,null,w(e.obstacleList,i=>(l(),f("img",{class:"obstacle",src:ye,key:i.id,style:b({height:`${i.height}px`,marginLeft:`${i.marginLeft}px`})},null,4))),128))],512),h("div",Pe,[(l(!0),f(C,null,w(e.foodList,i=>(l(),f("img",{class:"food",src:Ie,key:i.id,style:b({height:`${i.height}px`,marginLeft:`${i.marginLeft}px`,bottom:`${i.bottom}px`})},null,4))),128))],512),h("img",{ref:"player",class:"player flipX",src:Oe,style:b({bottom:`${e.playerBottom}px`})},null,4),e.isShowScore?(l(),f("p",Ee,"\u5F97\u5206\uFF1A"+E(e.currentScore),1)):x("",!0),e.isShowTips?(l(),f("p",xe,"\u6309\u7A7A\u683C\u952E\u5F00\u59CB\u6E38\u620F")):x("",!0)])}var Be=D(Se,[["render",Me],["__scopeId","data-v-01da509e"]]);const Ae={class:"game"},Ue=["src","alt"],De={class:"name"},Te=U(" \u8BE6\u60C5 "),Re=U(" \u6E90\u7801 "),He=U(" \u8BD5\u73A9 "),Ge=k({props:{game:null},setup(e){function t(r=""){return r.startsWith("/proc/")?"":"_blank"}return(r,o)=>{const n=Y,s=Z;return l(),f("div",Ae,[h("div",null,[h("img",{class:"logo",src:e.game.logo,alt:e.game.name},null,8,Ue),h("h1",De,E(e.game.name),1)]),h("p",null,E(e.game.desc),1),y(s,{size:"large",spacer:"|"},{default:I(()=>[y(n,{type:"primary",href:e.game.detailUrl,target:t(e.game.detailUrl),disabled:!e.game.detailUrl},{default:I(()=>[Te]),_:1},8,["href","target","disabled"]),y(n,{type:"primary",href:e.game.codeUrl,target:t(e.game.codeUrl),disabled:!e.game.codeUrl},{default:I(()=>[Re]),_:1},8,["href","target","disabled"]),y(n,{type:"primary",href:e.game.playUrl,target:t(e.game.playUrl),disabled:!e.game.playUrl},{default:I(()=>[He]),_:1},8,["href","target","disabled"])]),_:1})])}}});var Ne=D(Ge,[["__scopeId","data-v-6c8bd619"]]),ze="/proc/assets/color_up.30fb190b.jpg",ke="/proc/assets/knife_king.083fadab.jpg";const Ve=$.exports.uniqueId();$.exports.uniqueId();$.exports.uniqueId(),`${Ve}`;const We={id:$.exports.uniqueId(),name:"\u5FCD\u8005\u75BE\u98CE\u8F6C",logo:te,desc:"\u4F7F\u7528 Cocos Creator \u5F00\u53D1\u7684\u5FCD\u8005\u9898\u6750\u4F11\u95F2\u76CA\u667A\u5C0F\u6E38\u620F\u3002",detailUrl:`/proc/#/works?id=${re}`,playUrl:"https://pic1.zhimg.com/v2-72f07bbcb171f3a8942ca362ca400170_100w.jpg"},Ke=[We];const qe={key:0,class:"internalGame"},Je={class:"gameList"},Xe=k({setup(e){const t=ne.isMobile();return(r,o)=>(l(),f("div",null,[H(t)?x("",!0):(l(),f("div",qe,[y(Be)])),h("div",Je,[(l(!0),f(C,null,w(H(Ke),n=>(l(),ee(Ne,{key:n.id,game:n},null,8,["game"]))),128))])]))}});var tt=D(Xe,[["__scopeId","data-v-131f4794"]]);export{tt as default};
//# sourceMappingURL=index.2af67e85.js.map
